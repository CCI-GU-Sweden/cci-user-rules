<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CCI User Rules</title>
<!-- Use the compiled CSS from the main site -->
<link rel="stylesheet" href="https://cci-gu-sweden.github.io/assets/css/style.css">
<div id="main_content_wrap" class="wrapper">
  <section id="main_content" class="inner">
    <h1 id="ver-title">CCI User Rules</h1>
    <div id="md-content"><em>Loadingâ€¦</em></div>
  </section>
</div>

<script>
  (async function () {
    const parts = location.pathname.split('/').filter(Boolean);
    const tag = parts[parts.length - 1]; // .../versions/<TAG>/
    const mdUrl = `https://raw.githubusercontent.com/CCI-GU-Sweden/cci-user-rules/${tag}/CCI_User_Rules.md`;
    
    const resp = await fetch(mdUrl, { cache: 'no-store' });
    if (!resp.ok) {
      document.getElementById('md-content').textContent = `Failed to load ${mdUrl} (${resp.status})`;
      return;
    }
    const text = await resp.text();

    // Inject and render via Markdown-Tag (same tool you already use)
    document.getElementById('md-content').innerHTML = '<md>'+ text +'</md>';
    if (window.renderMarkdown) window.renderMarkdown();
    document.getElementById('ver-title').textContent = `CCI User Rules ${tag}`;
  })();
</script>
<script src="https://cdn.jsdelivr.net/gh/MarketingPipeline/Markdown-Tag/markdown-tag.js"></script>
